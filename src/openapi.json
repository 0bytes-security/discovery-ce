{"openapi": "3.1.0", "info": {"title": "Discovery", "version": "1.0.0"}, "paths": {"/health": {"get": {"summary": "Check Health", "operationId": "check_health_health_get", "responses": {"200": {"description": "Successful Response", "content": {"application/json": {"schema": {}}}}}}}, "/runs": {"get": {"tags": ["Runs"], "summary": "Get All Runs", "description": "Retrieve all runs with pagination. Results are paginated based on the creation date.", "operationId": "all-Runs", "responses": {"200": {"description": "Successfully retrieved the paginated list of runs.", "content": {"application/json": {"schema": {"$ref": "#/components/schemas/fastapi_pagination__default__Page_discovery__db__models__Run__leaf_"}}}}, "500": {"description": "Internal server error."}}}}, "/runs/filters": {"post": {"tags": ["Runs"], "summary": "Filter Runs", "description": "Filter runs based on the provided filter criteria.", "operationId": "filter-Runs", "requestBody": {"content": {"application/json": {"schema": {"$ref": "#/components/schemas/FilterableColumns"}}}, "required": true}, "responses": {"200": {"description": "Successfully retrieved the paginated list of filtered runs.", "content": {"application/json": {"schema": {"$ref": "#/components/schemas/fastapi_pagination__default__Page_discovery__db__models__Run__leaf_"}}}}, "400": {"description": "Bad request due to invalid filter criteria."}, "500": {"description": "Internal server error."}, "422": {"description": "Validation Error", "content": {"application/json": {"schema": {"$ref": "#/components/schemas/HTTPValidationError"}}}}}}}, "/runs/{run_id}": {"get": {"tags": ["Runs"], "summary": "Get Run by ID", "description": "Get a single run by its id. If the id is not found, a 404 response is returned.", "operationId": "getById-Runs", "parameters": [{"name": "run_id", "in": "path", "required": true, "schema": {"type": "string", "title": "Run Id"}}], "responses": {"200": {"description": "Successfully retrieved the run.", "content": {"application/json": {"schema": {"$ref": "#/components/schemas/tortoise__contrib__pydantic__creator__discovery__db__models__Run__leaf"}}}}, "400": {"description": "Invalid run id. Please provide a valid run id."}, "404": {"description": "Run not found. Please provide a valid run id."}, "500": {"description": "Server error."}, "422": {"description": "Validation Error", "content": {"application/json": {"schema": {"$ref": "#/components/schemas/HTTPValidationError"}}}}}}}, "/tasks": {"get": {"tags": ["Tasks"], "summary": "Get All Registered Tasks", "description": "Retrieve all registered tasks with pagination. Results are paginated based on the creation date.", "operationId": "all-Tasks", "responses": {"200": {"description": "Successfully retrieved the paginated list of tasks.", "content": {"application/json": {"schema": {"$ref": "#/components/schemas/fastapi_pagination__default__Page_discovery__db__models__Registry__leaf_"}}}}, "500": {"description": "Internal server error."}}}, "post": {"tags": ["Tasks"], "summary": "Register a New Task", "description": "Upload and register a task schema in the registry. The task schema can be provided in either JSON or YAML format.", "operationId": "addTask-Tasks", "requestBody": {"content": {"multipart/form-data": {"schema": {"$ref": "#/components/schemas/Body_addTask-Tasks"}}}, "required": true}, "responses": {"200": {"description": "Successful Response", "content": {"application/json": {"schema": {}}}}, "201": {"description": "The task was successfully added to the registry.", "content": {"application/json": {"example": {"message": "Task registered successfully", "id": "task_12345"}}}}, "400": {"description": "Bad request due to invalid file type, invalid schema, or task already exists.", "content": {"application/json": {"examples": {"invalid_file_type": {"summary": "Invalid File Type", "value": {"detail": "Invalid file type, only JSON and YAML files are allowed."}}, "invalid_json": {"summary": "Invalid JSON File", "value": {"detail": "Invalid JSON file. Please provide a valid JSON file."}}, "invalid_yaml": {"summary": "Invalid YAML File", "value": {"detail": "Invalid YAML file. Please provide a valid YAML file."}}, "validation_error": {"summary": "Schema Validation Error", "value": {"reason": "VALIDATION_ERROR", "message": "Invalid task schema", "details": [{"loc": ["name"], "msg": "field required", "type": "value_error.missing"}]}}, "task_exists": {"summary": "Task Already Exists", "value": {"detail": "Task already exists."}}}}}}, "500": {"description": "Internal server error occurred while processing the request.", "content": {"application/json": {"example": {"detail": "An unexpected error occurred. Please try again later."}}}}, "422": {"description": "Validation Error", "content": {"application/json": {"schema": {"$ref": "#/components/schemas/HTTPValidationError"}}}}}}}, "/tasks/{task_id}": {"get": {"tags": ["Tasks"], "summary": "Get Task by ID", "description": "Get a single task by its ID. If the ID is not found, a 404 response is returned.", "operationId": "getById-Tasks", "parameters": [{"name": "task_id", "in": "path", "required": true, "schema": {"type": "string", "title": "Task Id"}}], "responses": {"200": {"description": "Successfully retrieved the task.", "content": {"application/json": {"schema": {"$ref": "#/components/schemas/tortoise__contrib__pydantic__creator__discovery__db__models__Registry__leaf"}}}}, "400": {"description": "Invalid task ID. Please provide a valid task ID."}, "404": {"description": "Task not found. Please provide a valid task ID."}, "500": {"description": "Server error."}, "422": {"description": "Validation Error", "content": {"application/json": {"schema": {"$ref": "#/components/schemas/HTTPValidationError"}}}}}}}, "/tasks/run": {"post": {"tags": ["Tasks"], "summary": "Execute Task", "description": "Execute a specified task using the provided parameters. The task must already exist in the registry.", "operationId": "runTask-Tasks", "requestBody": {"content": {"application/json": {"schema": {"$ref": "#/components/schemas/TaskRequest"}}}, "required": true}, "responses": {"200": {"description": "Task executed successfully.", "content": {"application/json": {"schema": {"$ref": "#/components/schemas/RunResult"}, "example": {"id": "run_id"}}}}, "404": {"description": "Task not found in the registry.", "content": {"application/json": {"example": {"detail": "Task not found. Please provide a valid task ID."}}}}, "422": {"description": "Validation Error", "content": {"application/json": {"schema": {"$ref": "#/components/schemas/HTTPValidationError"}}}}}}}}, "components": {"schemas": {"Body_addTask-Tasks": {"properties": {"schema": {"type": "string", "format": "binary", "title": "Schema"}}, "type": "object", "required": ["schema"], "title": "Body_addTask-Tasks"}, "FilterableColumns": {"properties": {"status": {"$ref": "#/components/schemas/RunStatus"}, "owner_id": {"type": "string", "title": "Owner Id"}, "parent_id": {"type": "string", "title": "Parent Id"}}, "type": "object", "required": ["status"], "title": "FilterableColumns"}, "HTTPValidationError": {"properties": {"detail": {"items": {"$ref": "#/components/schemas/ValidationError"}, "type": "array", "title": "Detail"}}, "type": "object", "title": "HTTPValidationError"}, "RunResult": {"properties": {"id": {"type": "string", "title": "Id"}}, "type": "object", "required": ["id"], "title": "RunResult"}, "RunStatus": {"type": "string", "enum": ["PENDING", "RUNNING", "SUCCESS", "FAILED"], "title": "RunStatus"}, "TaskRequest": {"properties": {"id": {"type": "string", "title": "Id", "description": "The ID of the task in the registry."}, "parameters": {"type": "object", "title": "Parameters", "description": "The input parameters required for the task execution."}, "owner_id": {"type": "string", "title": "Owner Id", "description": "The ID of the owner who is executing the task."}, "parent_id": {"anyOf": [{"type": "string"}, {"type": "null"}], "title": "Parent Id", "description": "The ID of the parent task. If provided, this task will be considered a subtask of the parent task."}}, "type": "object", "required": ["id", "parameters", "owner_id"], "title": "TaskRequest"}, "ValidationError": {"properties": {"loc": {"items": {"anyOf": [{"type": "string"}, {"type": "integer"}]}, "type": "array", "title": "Location"}, "msg": {"type": "string", "title": "Message"}, "type": {"type": "string", "title": "Error Type"}}, "type": "object", "required": ["loc", "msg", "type"], "title": "ValidationError"}, "fastapi_pagination__default__Page_discovery__db__models__Registry__leaf_": {"properties": {"items": {"items": {"$ref": "#/components/schemas/tortoise__contrib__pydantic__creator__discovery__db__models__Registry__leaf"}, "type": "array", "title": "Items"}, "total": {"anyOf": [{"type": "integer", "minimum": 0.0}, {"type": "null"}], "title": "Total"}, "page": {"anyOf": [{"type": "integer", "minimum": 1.0}, {"type": "null"}], "title": "Page"}, "size": {"anyOf": [{"type": "integer", "minimum": 1.0}, {"type": "null"}], "title": "Size"}, "pages": {"anyOf": [{"type": "integer", "minimum": 0.0}, {"type": "null"}], "title": "Pages"}}, "type": "object", "required": ["items", "total", "page", "size"], "title": "Page[discovery.db.models.Registry.leaf]"}, "fastapi_pagination__default__Page_discovery__db__models__Run__leaf_": {"properties": {"items": {"items": {"$ref": "#/components/schemas/tortoise__contrib__pydantic__creator__discovery__db__models__Run__leaf"}, "type": "array", "title": "Items"}, "total": {"anyOf": [{"type": "integer", "minimum": 0.0}, {"type": "null"}], "title": "Total"}, "page": {"anyOf": [{"type": "integer", "minimum": 1.0}, {"type": "null"}], "title": "Page"}, "size": {"anyOf": [{"type": "integer", "minimum": 1.0}, {"type": "null"}], "title": "Size"}, "pages": {"anyOf": [{"type": "integer", "minimum": 0.0}, {"type": "null"}], "title": "Pages"}}, "type": "object", "required": ["items", "total", "page", "size"], "title": "Page[discovery.db.models.Run.leaf]"}, "tortoise__contrib__pydantic__creator__discovery__db__models__Registry__leaf": {"properties": {"id": {"type": "string", "maxLength": 256, "title": "Id"}, "name": {"anyOf": [{"type": "string"}, {"type": "null"}], "title": "Name", "nullable": true}, "description": {"anyOf": [{"type": "string"}, {"type": "null"}], "title": "Description", "nullable": true}, "schema": {"title": "Schema"}, "type": {"type": "string", "maxLength": 8, "title": "Type", "description": "TASK: TASK<br/>WORKFLOW: WORKFLOW"}, "created_at": {"type": "string", "format": "date-time", "title": "Created At", "readOnly": true}, "updated_at": {"type": "string", "format": "date-time", "title": "Updated At", "readOnly": true}}, "additionalProperties": false, "type": "object", "required": ["id", "name", "description", "schema", "type", "created_at", "updated_at"], "title": "Registry"}, "tortoise__contrib__pydantic__creator__discovery__db__models__Run__leaf": {"properties": {"id": {"type": "string", "maxLength": 36, "title": "Id"}, "name": {"type": "string", "title": "Name"}, "owner_id": {"anyOf": [{"type": "string", "maxLength": 255}, {"type": "null"}], "title": "Owner Id", "nullable": true}, "parameters": {"title": "Parameters", "default": {}}, "status": {"anyOf": [{"type": "string", "maxLength": 7}, {"type": "null"}], "title": "Status", "description": "PENDING: PENDING<br/>RUNNING: RUNNING<br/>SUCCESS: SUCCESS<br/>FAILED: FAILED", "default": "PENDING"}, "result": {"title": "Result", "default": {}}, "files": {"title": "Files", "default": []}, "errors": {"title": "Errors", "default": []}, "started_at": {"anyOf": [{"type": "string", "format": "date-time"}, {"type": "null"}], "title": "Started At", "nullable": true}, "failed_at": {"anyOf": [{"type": "string", "format": "date-time"}, {"type": "null"}], "title": "Failed At", "nullable": true}, "completed_at": {"anyOf": [{"type": "string", "format": "date-time"}, {"type": "null"}], "title": "Completed At", "nullable": true}, "created_at": {"type": "string", "format": "date-time", "title": "Created At", "readOnly": true}, "updated_at": {"type": "string", "format": "date-time", "title": "Updated At", "readOnly": true}}, "additionalProperties": false, "type": "object", "required": ["id", "name", "created_at", "updated_at"], "title": "Run"}}}}